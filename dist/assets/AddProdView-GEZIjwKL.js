import{u as H,r as v,o as J,b as n,c as d,e,p as u,x as A,F as D,f as C,t as f,s as r,d as V,i,A as p,q as E,g as h,h as B,k as y,B as K,C as Q,D as W,E as X,m as x,G as S,n as Y,H as Z}from"./index-Sydn4ZkO.js";import{A as U}from"./Add-1LyEdc_U.js";const ee=e("h1",{class:"text-2xl font-bold"},"Add Product",-1),te={class:"flex flex-col gap-4"},le=e("label",{for:"Games"},"Game",-1),oe=e("option",{selected:"",disabled:"",value:""},"Select game",-1),ae=["value"],se=["src"],ne=["value"],de={value:"add"},ie={class:"flex gap-3"},ue={key:0,class:"flex flex-col gap-3"},ce=e("label",{for:"Games"},"Category",-1),re=e("option",{selected:"",disabled:"",value:""},"Select category",-1),ge=["value"],me=["src"],pe=["value"],ve={value:"add"},fe={class:"flex gap-3"},_e={key:0,class:"flex flex-col grow"},he={class:"flex gap-3"},ye={class:"flex flex-col grow"},xe=e("label",{for:"id"},[e("strong",null,"Category"),i(" ID:")],-1),be={class:"flex flex-col grow"},we=e("label",{for:"name"},[e("strong",null,"Category"),i(" Name:")],-1),ke={class:"flex max-h-60 max-w-60"},De=e("label",{for:"image"},[e("strong",null,"Category"),i(" Image:")],-1),Ce=e("div",null,null,-1),Ve=["src"],Ue={key:0,class:"bg-green-300 rounded-lg text-black p-5"},qe={key:1,class:"flex flex-col gap-3"},Ge={class:"flex gap-3"},Ae={class:"flex flex-col grow"},Se=e("label",{for:"id"},[e("strong",null,"Game"),i(" ID:")],-1),Ne={class:"flex flex-col grow"},Re=e("label",{for:"name"},[e("strong",null,"Game"),i(" Name:")],-1),Ie={class:"flex-grow flex flex-row-reverse"},Ee={class:"flex gap-3 items-center"},Be={class:"flex flex-col grow"},Me=e("label",{for:"id"},[e("strong",null,"Game"),i(" Method Name:")],-1),Oe=["id","onUpdate:modelValue"],$e={class:"flex flex-col grow"},je=e("label",{for:"name"},[e("strong",null,"Method"),i(" Type:")],-1),Fe=["id","onUpdate:modelValue","onChange"],Le=Z('<option class="" selected disabled value="">Select method type</option><option value="text">text</option><option value="email">Email</option><option value="number">number</option><option value="password">password</option><option value="select">Select Option</option>',6),Pe=[Le],Te={class:"flex flex-col grow"},ze={key:0,class:"flex justify-between grow"},He=e("label",{for:"name"},[e("strong",null,"Select "),i(" Option:")],-1),Je=["onClick"],Ke={key:1,class:"flex-grow flex gap-3"},Qe=["id","onUpdate:modelValue"],We={class:"flex flex-col grow"},Xe=e("label",{for:"name"},[e("strong",null,"Game"),i(" Description:")],-1),Ye={class:"flex max-h-60 max-w-60"},Ze=e("label",{for:"image"},[e("strong",null,"Game"),i(" Image:")],-1),et=["src"],tt={key:0,class:"bg-green-300 rounded-lg text-black p-5"},lt={class:"flex gap-3"},ot={class:"flex flex-col grow"},at=e("label",{for:"id"},[e("strong",null,"Item"),i(" ID:")],-1),st={class:"flex flex-col grow"},nt=e("label",{for:"name"},[e("strong",null,"Item"),i(" Name:")],-1),dt={class:"flex flex-col grow"},it=e("label",{for:"price"},[e("strong",null,"Item"),i(" Price:")],-1),ut={key:2,class:"bg-green-300 rounded-lg text-black p-5"},mt={__name:"AddProdView",setup(ct){const q=H(),a=v({id:"",name:"",image:"",uploader:q.user.email,method:[{name:"",type:""}]}),G=v(!1),b=v(!1),g=v({id:"",name:"",image:"",items:[],uploader:q.user.email}),s=v({id:"",name:"",price:0,game:"",category:"",uploader:q.user.email}),N=v([]),R=v([]),M=async()=>{const o=E(h(y,"game")),l=await B(o);N.value=l.docs.map(t=>t.data())},O=async()=>{const o=E(h(y,"game",s.value.game,"products")),l=await B(o);R.value=l.docs.map(t=>t.data())},I=async(o,l)=>{const c=o.target.files;if(c.length>0){const m=c[0],w=K(Q,`images/${m.name}`);try{await W(w,m);const k=await X(w);l==="game"?a.value.image=k:g.value.image=k}catch(k){console.error("Error uploading file: ",k)}}},$=async()=>{try{console.log(a.value);const o=a.value.id,l=x(h(y,"game"),o);await S(l,a.value),s.game=o,b.value=!0,console.log("Document with custom ID added: ",o)}catch(o){console.error("Error adding document: ",o)}},_=v(!1),j=async()=>{try{const o=g.value.id,l=x(y,"game",s.value.game),t=h(l,"products"),c=x(t,o);await S(c,g.value),s.value.category=o,console.log("Document with custom ID added: ",o),_.value=`Document with custom ID added: ${o}`}catch(o){console.error("Error adding document: ",o),_.value=`Error adding document: ${o.message}`}},F=async()=>{try{const o=x(y,"game",s.value.game),l=h(o,"products"),t=x(l,s.value.category),m=(await Y(t)).data();m.items=[...m.items,s.value],await S(t,m),G.value="Item added to 'products' sub-collection in the selected game document."}catch(o){console.error("Error adding item: ",o)}},L=()=>{a.value.method.push({name:"",type:""})},P=o=>{a.value.method[o].options.push("")},T=o=>{const l={name:a.value.method[o].name,type:a.value.method[o].type,options:[""]};a.value.method[o]=l,console.log(a.value.method[o])},z=o=>{const l={name:a.value.method[o].name,type:a.value.method[o].type};a.value.method[o]=l,console.log(a.value.method[o])};return J(()=>{M()}),(o,l)=>(n(),d("div",null,[ee,e("form",te,[le,u(e("select",{onChange:O,required:"",class:"bg-slate-700 p-3 rounded-lg text-lg max-w-md",name:"Games",id:"Games","onUpdate:modelValue":l[0]||(l[0]=t=>s.value.game=t)},[oe,(n(!0),d(D,null,C(N.value,t=>(n(),d("option",{key:t.id,value:t.id},[e("img",{src:t.image,alt:""},null,8,se),i(" "+f(t.name),1)],8,ae))),128)),b.value?(n(),d("option",{key:0,selected:"",value:a.value.id},f(a.value.name),9,ne)):r("",!0),e("option",de,[e("span",ie,[V(U),i("Add new game")])])],544),[[A,s.value.game]]),s.value.game&&s.value.game!="add"?(n(),d("div",ue,[ce,u(e("select",{required:"",class:"bg-slate-700 p-3 rounded-lg text-lg max-w-md",name:"Games",id:"Games","onUpdate:modelValue":l[1]||(l[1]=t=>s.value.category=t)},[re,(n(!0),d(D,null,C(R.value,t=>(n(),d("option",{key:t.id,value:t.id},[e("img",{src:t.image,alt:""},null,8,me),i(" "+f(t.name),1)],8,ge))),128)),_.value?(n(),d("option",{key:0,selected:"",value:g.value.id},f(g.value.name),9,pe)):r("",!0),e("option",ve,[e("span",fe,[V(U),i("Add new category")])])],512),[[A,s.value.category]]),s.value.category=="add"?(n(),d("div",_e,[e("div",he,[e("div",ye,[xe,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id","onUpdate:modelValue":l[2]||(l[2]=t=>g.value.id=t)},null,512),[[p,g.value.id]])]),e("div",be,[we,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":l[3]||(l[3]=t=>g.value.name=t)},null,512),[[p,g.value.name]])])]),e("div",ke,[e("div",null,[De,e("input",{required:"",type:"file",class:"p-3 file:p-2 file:bg-slate-700 file:rounded-full file:border-0 file:hover:bg-slate-600 file:me-3 file:px-4 file:text-white",id:"image",onChange:l[4]||(l[4]=t=>I(t,"category"))},null,32)]),Ce,g.value.image?(n(),d("img",{key:0,src:g.value.image,class:"",alt:"Uploaded Image",style:{"max-width":"100%","margin-top":"10px"}},null,8,Ve)):r("",!0)]),e("button",{type:"button",class:"bg-blue-700 p-3 rounded-lg text-lg",onClick:j},"Add Category"),_.value?(n(),d("div",Ue,[e("span",null,"Game Succesfully added with ID: "+f(_.value),1)])):r("",!0)])):r("",!0)])):r("",!0),s.value.game=="add"?(n(),d("div",qe,[e("div",Ge,[e("div",Ae,[Se,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id","onUpdate:modelValue":l[5]||(l[5]=t=>a.value.id=t)},null,512),[[p,a.value.id]])]),e("div",Ne,[Re,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":l[6]||(l[6]=t=>a.value.name=t)},null,512),[[p,a.value.name]])])]),e("div",Ie,[e("button",{type:"button",onClick:L,class:"group text-lg font-semibold flex gap-2 justify-center"},[V(U,{class:"w-7 duration-150 group-hover:scale-105"}),i(" Add method ")])]),(n(!0),d(D,null,C(a.value.method.length,t=>(n(),d("div",{key:t,class:"flex flex-col gap-3"},[e("div",Ee,[e("div",Be,[Me,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id_"+t,"onUpdate:modelValue":c=>a.value.method[t-1].name=c},null,8,Oe),[[p,a.value.method[t-1].name]])]),e("div",$e,[je,u(e("select",{class:"bg-slate-700 capitalize p-4 rounded-lg text-lg",id:"type_"+t,"onUpdate:modelValue":c=>a.value.method[t-1].type=c,onChange:c=>a.value.method[t-1].type==="select"?T(t-1):z(t-1)},Pe,40,Fe),[[A,a.value.method[t-1].type]])])]),e("div",Te,[a.value.method[t-1].type==="select"?(n(),d("div",ze,[He,e("button",{onClick:c=>P(t-1),type:"button",class:"group text-lg font-semibold flex gap-2 justify-center"},[V(U,{class:"w-7 duration-150 group-hover:scale-105"}),i(" Add Option ")],8,Je)])):r("",!0),a.value.method[t-1].options?(n(),d("div",Ke,[(n(!0),d(D,null,C(a.value.method[t-1].options,(c,m)=>u((n(),d("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg grow",id:"option_"+m,"onUpdate:modelValue":w=>a.value.method[t-1].options[m]=w},null,8,Qe)),[[p,a.value.method[t-1].options[m]]])),256))])):r("",!0)])]))),128)),e("div",We,[Xe,u(e("textarea",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":l[7]||(l[7]=t=>a.value.desc=t)},null,512),[[p,a.value.desc]])]),e("div",Ye,[e("div",null,[Ze,e("input",{required:"",type:"file",class:"p-3 file:p-2 file:bg-slate-700 file:rounded-full file:border-0 file:hover:bg-slate-600 file:me-3 file:px-4 file:text-white",id:"image",onChange:l[8]||(l[8]=t=>I(t,"game"))},null,32)]),a.value.image?(n(),d("img",{key:0,src:a.value.image,class:"",alt:"Uploaded Image",style:{"max-width":"100%","margin-top":"10px"}},null,8,et)):r("",!0)]),e("button",{type:"button",class:"bg-blue-700 p-3 rounded-lg text-lg",onClick:$},"Add Game"),b.value?(n(),d("div",tt,[e("span",null,"Game Succesfully added with ID: "+f(b.value),1)])):r("",!0)])):r("",!0),e("div",lt,[e("div",ot,[at,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id","onUpdate:modelValue":l[9]||(l[9]=t=>s.value.id=t)},null,512),[[p,s.value.id]])]),e("div",st,[nt,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":l[10]||(l[10]=t=>s.value.name=t)},null,512),[[p,s.value.name]])])]),e("div",dt,[it,u(e("input",{required:"",type:"number",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"price","onUpdate:modelValue":l[11]||(l[11]=t=>s.value.price=t)},null,512),[[p,s.value.price]])]),e("button",{type:"button",class:"bg-blue-700 p-3 rounded-lg text-lg",onClick:F},"Add Items"),G.value?(n(),d("div",ut,[e("span",null,f(G.value)+" in ",1)])):r("",!0)])]))}};export{mt as default};
