import{u as J,r as v,o as K,b as n,c as d,e,p as u,x as A,F as D,f as q,t as f,s as c,d as V,i,A as p,y as S,q as P,g as x,h as B,k as b,B as Q,C as W,D as X,E as Y,m as w,G as N,n as Z,H as ee}from"./index-GKpfcSjP.js";import{A as U}from"./Add-gIbn5K16.js";const te=e("h1",{class:"text-2xl font-bold"},"Add Product",-1),le={class:"flex flex-col gap-4"},oe=e("label",{for:"Games"},"Game",-1),se=e("option",{selected:"",disabled:"",value:""},"Select game",-1),ae=["value"],ne=["src"],de=["value"],ie={value:"add"},ue={class:"flex gap-3"},re={key:0,class:"flex flex-col gap-3"},ce=e("label",{for:"Games"},"Category",-1),ge=e("option",{selected:"",disabled:"",value:""},"Select category",-1),me=["value"],pe=["src"],ve=["value"],fe={value:"add"},_e={class:"flex gap-3"},ye={key:0,class:"flex flex-col grow gap-3"},he={class:"flex gap-3"},xe={class:"flex flex-col grow"},be=e("label",{for:"id"},[e("strong",null,"Category"),i(" ID:")],-1),we={class:"flex flex-col grow"},ke=e("label",{for:"name"},[e("strong",null,"Category"),i(" Name:")],-1),Ce={class:"flex max-h-60 max-w-60"},De=e("label",{for:"image"},[e("strong",null,"Category"),i(" Image:")],-1),qe=e("div",null,null,-1),Ve=["src"],Ue={key:1,class:"flex flex-col gap-3"},Ge={class:"flex gap-3"},Ae={class:"flex flex-col grow"},Se=e("label",{for:"id"},[e("strong",null,"Game"),i(" ID:")],-1),Ne={class:"flex flex-col grow"},Re=e("label",{for:"name"},[e("strong",null,"Game"),i(" Name:")],-1),Ee={class:"flex-grow flex flex-row-reverse"},Ie={class:"flex gap-3 items-center"},Pe={class:"flex flex-col grow"},Be=e("label",{for:"id"},[e("strong",null,"Game"),i(" Method Name:")],-1),Me=["id","onUpdate:modelValue"],Oe={class:"flex flex-col grow"},je=e("label",{for:"name"},[e("strong",null,"Method"),i(" Type:")],-1),$e=["id","onUpdate:modelValue","onChange"],Fe=ee('<option class="" selected disabled value="">Select method type</option><option value="text">text</option><option value="email">Email</option><option value="number">number</option><option value="password">password</option><option value="select">Select Option</option>',6),Le=[Fe],Te={class:"flex flex-col grow"},ze={key:0,class:"flex justify-between grow"},He=e("label",{for:"name"},[e("strong",null,"Select "),i(" Option:")],-1),Je=["onClick"],Ke={key:1,class:"flex-grow flex gap-3"},Qe=["id","onUpdate:modelValue"],We={class:"flex flex-col grow"},Xe=e("label",{for:"name"},[e("strong",null,"Game"),i(" Description:")],-1),Ye={class:"flex max-h-60 max-w-60"},Ze=e("label",{for:"image"},[e("strong",null,"Game"),i(" Image:")],-1),et=["src"],tt={class:"flex gap-3"},lt={class:"flex flex-col grow"},ot=e("label",{for:"id"},[e("strong",null,"Item"),i(" ID:")],-1),st={class:"flex flex-col grow"},at=e("label",{for:"name"},[e("strong",null,"Item"),i(" Name:")],-1),nt={class:"flex flex-col grow"},dt=e("label",{for:"price"},[e("strong",null,"Item"),i(" Price:")],-1),ct={__name:"AddProdView",setup(it){const G=J(),s=v({id:"",name:"",image:"",uploader:G.user.email,method:[{name:"",type:""}]}),h=v({message:"",type:""}),_=v({message:"",type:""}),g=v({id:"",name:"",image:"",items:[],uploader:G.user.email}),a=v({id:"",name:"",price:0,game:"",category:"",uploader:G.user.email}),R=v([]),E=v([]),M=async()=>{const o=P(x(b,"game")),l=await B(o);R.value=l.docs.map(t=>t.data())},O=async()=>{const o=P(x(b,"game",a.value.game,"products")),l=await B(o);E.value=l.docs.map(t=>t.data())},I=async(o,l)=>{const r=o.target.files;if(r.length>0){const m=r[0],k=Q(W,`images/${m.name}`);try{await X(k,m);const C=await Y(k);l==="game"?s.value.image=C:g.value.image=C}catch(C){console.error("Error uploading file: ",C)}}},j=async()=>{try{if(!s.value.id||!s.value.name||!s.value.desc||!s.value.image){console.error("Please fill in all required fields."),_.value={message:"Please fill in all required fields.",type:"error"};return}const o=s.value.id,l=w(x(b,"game"),o);await N(l,s.value),a.game=o,_.value={message:"Document with custom ID added: "+o,type:"success"},console.log("Document with custom ID added: ",o)}catch(o){console.error("Error adding document: ",o)}},y=v({message:"",type:""}),$=async()=>{try{const o=g.value.id,l=w(b,"game",a.value.game),t=x(l,"products"),r=w(t,o);await N(r,g.value),a.value.category=o,console.log("Document with custom ID added: ",o),y.value={message:"Document with custom ID added: "+o,type:"success"}}catch(o){console.error("Error adding document: ",o),y.value={message:`Error adding document: ${o.message}`,type:"error"}}},F=async()=>{try{if(!a.value.id||!a.value.name||!a.value.price||!a.value.game||!a.value.category){console.error("Please fill in all required fields."),h.value={message:"Please fill in all required fields.",type:"error"};return}try{const o=w(b,"game",a.value.game),l=x(o,"products"),t=w(l,a.value.category),m=(await Z(t)).data();m.items=[...m.items,a.value],await N(t,m),h.value={message:"Item added to 'products' sub-collection in the selected game document.",type:"success"}}catch(o){console.error("Error adding item: ",o)}}catch(o){console.error("Error adding item: ",o)}},L=()=>{s.value.method.push({name:"",type:""})},T=o=>{s.value.method[o].options.push("")},z=o=>{const l={name:s.value.method[o].name,type:s.value.method[o].type,options:[""]};s.value.method[o]=l,console.log(s.value.method[o])},H=o=>{const l={name:s.value.method[o].name,type:s.value.method[o].type};s.value.method[o]=l,console.log(s.value.method[o])};return K(()=>{M()}),(o,l)=>(n(),d("div",null,[te,e("form",le,[oe,u(e("select",{onChange:O,required:"",class:"bg-slate-700 p-3 rounded-lg text-lg max-w-md",name:"Games",id:"Games","onUpdate:modelValue":l[0]||(l[0]=t=>a.value.game=t)},[se,(n(!0),d(D,null,q(R.value,t=>(n(),d("option",{key:t.id,value:t.id},[e("img",{src:t.image,alt:""},null,8,ne),i(" "+f(t.name),1)],8,ae))),128)),_.value.type=="success"?(n(),d("option",{key:0,selected:"",value:s.value.id},f(s.value.name),9,de)):c("",!0),e("option",ie,[e("span",ue,[V(U),i("Add new game")])])],544),[[A,a.value.game]]),a.value.game&&a.value.game!="add"?(n(),d("div",re,[ce,u(e("select",{required:"",class:"bg-slate-700 p-3 rounded-lg text-lg max-w-md",name:"Games",id:"Games","onUpdate:modelValue":l[1]||(l[1]=t=>a.value.category=t)},[ge,(n(!0),d(D,null,q(E.value,t=>(n(),d("option",{key:t.id,value:t.id},[e("img",{src:t.image,alt:""},null,8,pe),i(" "+f(t.name),1)],8,me))),128)),y.value.type=="success"?(n(),d("option",{key:0,selected:"",value:g.value.id},f(g.value.name),9,ve)):c("",!0),e("option",fe,[e("span",_e,[V(U),i("Add new category")])])],512),[[A,a.value.category]]),a.value.category=="add"?(n(),d("div",ye,[e("div",he,[e("div",xe,[be,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id","onUpdate:modelValue":l[2]||(l[2]=t=>g.value.id=t)},null,512),[[p,g.value.id]])]),e("div",we,[ke,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":l[3]||(l[3]=t=>g.value.name=t)},null,512),[[p,g.value.name]])])]),e("div",Ce,[e("div",null,[De,e("input",{required:"",type:"file",class:"p-3 file:p-2 file:bg-slate-700 file:rounded-full file:border-0 file:hover:bg-slate-600 file:me-3 file:px-4 file:text-white",id:"image",onChange:l[4]||(l[4]=t=>I(t,"category"))},null,32)]),qe,g.value.image?(n(),d("img",{key:0,src:g.value.image,class:"",alt:"Uploaded Image",style:{"max-width":"100%","margin-top":"10px"}},null,8,Ve)):c("",!0)]),e("button",{type:"button",class:"bg-blue-700 p-3 rounded-lg text-lg",onClick:$},"Add Category"),y.value.message?(n(),d("div",{key:0,class:S([y.value.type=="success"?"bg-green-500":"bg-red-500","rounded-lg text-black p-5"])},[e("span",null,f(y.value.message),1)],2)):c("",!0)])):c("",!0)])):c("",!0),a.value.game=="add"?(n(),d("div",Ue,[e("div",Ge,[e("div",Ae,[Se,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id","onUpdate:modelValue":l[5]||(l[5]=t=>s.value.id=t)},null,512),[[p,s.value.id]])]),e("div",Ne,[Re,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":l[6]||(l[6]=t=>s.value.name=t)},null,512),[[p,s.value.name]])])]),e("div",Ee,[e("button",{type:"button",onClick:L,class:"group text-lg font-semibold flex gap-2 justify-center"},[V(U,{class:"w-7 duration-150 group-hover:scale-105"}),i(" Add method ")])]),(n(!0),d(D,null,q(s.value.method.length,t=>(n(),d("div",{key:t,class:"flex flex-col gap-3"},[e("div",Ie,[e("div",Pe,[Be,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id_"+t,"onUpdate:modelValue":r=>s.value.method[t-1].name=r},null,8,Me),[[p,s.value.method[t-1].name]])]),e("div",Oe,[je,u(e("select",{class:"bg-slate-700 capitalize p-4 rounded-lg text-lg",id:"type_"+t,"onUpdate:modelValue":r=>s.value.method[t-1].type=r,onChange:r=>s.value.method[t-1].type==="select"?z(t-1):H(t-1)},Le,40,$e),[[A,s.value.method[t-1].type]])])]),e("div",Te,[s.value.method[t-1].type==="select"?(n(),d("div",ze,[He,e("button",{onClick:r=>T(t-1),type:"button",class:"group text-lg font-semibold flex gap-2 justify-center"},[V(U,{class:"w-7 duration-150 group-hover:scale-105"}),i(" Add Option ")],8,Je)])):c("",!0),s.value.method[t-1].options?(n(),d("div",Ke,[(n(!0),d(D,null,q(s.value.method[t-1].options,(r,m)=>u((n(),d("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg grow",id:"option_"+m,"onUpdate:modelValue":k=>s.value.method[t-1].options[m]=k},null,8,Qe)),[[p,s.value.method[t-1].options[m]]])),256))])):c("",!0)])]))),128)),e("div",We,[Xe,u(e("textarea",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":l[7]||(l[7]=t=>s.value.desc=t)},null,512),[[p,s.value.desc]])]),e("div",Ye,[e("div",null,[Ze,e("input",{required:"",type:"file",class:"p-3 file:p-2 file:bg-slate-700 file:rounded-full file:border-0 file:hover:bg-slate-600 file:me-3 file:px-4 file:text-white",id:"image",onChange:l[8]||(l[8]=t=>I(t,"game"))},null,32)]),s.value.image?(n(),d("img",{key:0,src:s.value.image,class:"",alt:"Uploaded Image",style:{"max-width":"100%","margin-top":"10px"}},null,8,et)):c("",!0)]),e("button",{type:"button",class:"bg-blue-700 p-3 rounded-lg text-lg",onClick:j},"Add Game"),_.value.message?(n(),d("div",{key:0,class:S([_.value.type==="success"?"bg-green-500":"bg-red-500","rounded-lg text-black p-5"])},[e("span",null,f(_.value.message),1)],2)):c("",!0)])):c("",!0),e("div",tt,[e("div",lt,[ot,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id","onUpdate:modelValue":l[9]||(l[9]=t=>a.value.id=t)},null,512),[[p,a.value.id]])]),e("div",st,[at,u(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":l[10]||(l[10]=t=>a.value.name=t)},null,512),[[p,a.value.name]])])]),e("div",nt,[dt,u(e("input",{required:"",type:"number",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"price","onUpdate:modelValue":l[11]||(l[11]=t=>a.value.price=t)},null,512),[[p,a.value.price]])]),e("button",{type:"button",class:"bg-blue-700 p-3 rounded-lg text-lg",onClick:F},"Add Items"),h.value.message?(n(),d("div",{key:2,class:S([h.value.type==="success"?"bg-green-300":"bg-red-300","rounded-lg text-black p-5"])},[e("span",null,f(h.value.message)+" in ",1)],2)):c("",!0)])]))}};export{ct as default};
