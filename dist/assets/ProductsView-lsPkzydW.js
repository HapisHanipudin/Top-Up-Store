import{A as C}from"./Add-aG9o8AEP.js";import{u as A,a as B,b as S,d as j,e as m,f as q,g as u,F as g,h as x,q as G,i as L,j as N,o as a,k as l,t as v,l as V,c as d,w as f,m as $,n as p,p as E,s as R,v as P,r as D}from"./index-jbwhbzbo.js";const F={class:"flex flex-col justify-center mt-4 gap-4"},z={class:"flex justify-between grow container"},I={class:"font-Niramit text-3xl bold"},M={class:"aspect-square p-3 flex items-center relative w-full overflow-hidden"},T=["src"],H={class:"px-1 text-xl lg:text-2xl"},Q={__name:"ProductsView",setup(J){const c=A();B(),S();const n=j([]),o=m(()=>c.path.includes("category")?c.params.cat:c.path.includes("admin")?"All Products":""),_=async()=>{const e=G(L(P,"game")),s=await N(e);n.value=s.docs.map(t=>t.data())},h=()=>{const e=new Set;return n.value.forEach(s=>{s.categories.forEach(t=>{e.add(t)})}),Array.from(e)},y=m(()=>h()),w=e=>`/products/category/${e}`,k=e=>c.path.includes("admin")?`/admin/item/${e.id}`:`/products/${e.id}`,b=m(()=>{if(o.value){const e=n.value.filter(s=>s.categories.includes(o.value));return[{category:o.value,games:e}]}else{const e=[];return y.value.forEach(s=>{const t=n.value.filter(r=>r.categories.includes(s)).slice(0,6);e.push({category:s,games:t})}),e}});return q(()=>{_()}),(e,s)=>{const t=D("RouterLink");return a(),u("div",F,[(a(!0),u(g,null,x(b.value,r=>(a(),u("div",{class:"flex flex-col justify-center mt-4 gap-4",key:r.category},[l("div",z,[l("h1",I,v(r.category),1),V(c).path.includes("admin")?(a(),d(t,{key:0,to:"/admin/add-product",class:"group text-lg font-semibold flex gap-2 items-center"},{default:f(()=>[$(C,{class:"w-7 duration-150 group-hover:scale-105"}),p(" Add Product")]),_:1})):o.value?o.value?(a(),d(t,{key:2,to:"/products",class:"text-lg font-semibold flex gap-2 items-center"},{default:f(()=>[p("Back")]),_:1})):E("",!0):(a(),d(t,{key:1,to:w(r.category),class:"text-lg font-semibold flex gap-2 items-center"},{default:f(()=>[p("See All")]),_:2},1032,["to"]))]),l("div",{class:R([o.value?"flex-wrap justify-center":"overflow-x-scroll","flex gap-3 p-3"])},[(a(!0),u(g,null,x(r.games,i=>(a(),d(t,{to:k(i),class:"min-w-52 max-w-72 lg:min-w-72 relative text-center bg-slate-700 overflow-hidden rounded-xl pb-2 hover:scale-105 duration-300",key:i.id},{default:f(()=>[l("div",M,[l("img",{class:"top-0 h-full w-auto rounded-xl",src:`${i.image}`,alt:""},null,8,T)]),l("h3",H,v(i.name),1)]),_:2},1032,["to"]))),128))],2)]))),128))])}}};export{Q as default};
