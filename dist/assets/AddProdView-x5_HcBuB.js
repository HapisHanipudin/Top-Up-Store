import{u as H,r as p,o as J,b as n,c as d,e,s as c,x as C,F as U,f as V,t as f,m as g,d as D,i,A as m,y as S,q as P,g as y,h as M,k as b,B as Q,C as W,D as X,E as Y,n as h,G,H as Z}from"./index-yi8XQu8U.js";import{A}from"./Add-16rs5K8n.js";const ee=e("h1",{class:"text-2xl font-bold"},"Add Product",-1),le={class:"flex flex-col gap-4"},te=e("label",{for:"Games"},"Game",-1),oe=e("option",{selected:"",disabled:"",value:""},"Select game",-1),se=["value"],ae=["src"],ne=["value"],de={value:"add"},ie={class:"flex gap-3"},ue={key:0,class:"flex flex-col gap-3"},re=e("label",{for:"Games"},"Currency",-1),ce=e("option",{selected:"",disabled:"",value:""},"Select currency",-1),ge=["value"],me=["src"],pe=["value"],ve={value:"add"},fe={class:"flex gap-3"},_e={key:0,class:"flex flex-col grow gap-3"},ye={class:"flex gap-3"},he={class:"flex flex-col grow"},xe=e("label",{for:"id"},[e("strong",null,"Currency"),i(" ID:")],-1),be={class:"flex flex-col grow"},we=e("label",{for:"name"},[e("strong",null,"Currency"),i(" Name:")],-1),ke={class:"flex max-h-60 max-w-60"},qe=e("label",{for:"image"},[e("strong",null,"Currency"),i(" Image:")],-1),Ce=e("div",null,null,-1),Ue=["src"],Ve={key:1,class:"flex flex-col gap-3"},De={class:"flex gap-3"},Se={class:"flex flex-col grow"},Ge=e("label",{for:"id"},[e("strong",null,"Game"),i(" ID:")],-1),Ae={class:"flex flex-col grow"},Ne=e("label",{for:"name"},[e("strong",null,"Game"),i(" Name:")],-1),Re={class:"flex-grow flex flex-row-reverse"},Ee={class:"flex gap-3 items-center"},Ie={class:"flex flex-col grow"},Pe=e("label",{for:"id"},[e("strong",null,"Game"),i(" Method Name:")],-1),Me=["id","onUpdate:modelValue"],Be={class:"flex flex-col grow"},Oe=e("label",{for:"name"},[e("strong",null,"Method"),i(" Type:")],-1),$e=["onChange","id","onUpdate:modelValue"],je=Z('<option class="" selected disabled value="">Select method type</option><option value="text">text</option><option value="email">Email</option><option value="number">number</option><option value="password">password</option><option value="select">Select Option</option>',6),Te=[je],Fe={class:"flex flex-col grow"},Ke={key:0,class:"flex justify-between grow"},Le=e("label",{for:"name"},[e("strong",null,"Select "),i(" Option:")],-1),ze=e("span",null,'GUNAKAN "," UNTUK MEMISAHKAN',-1),He=[Le,ze],Je={key:1,class:"flex-grow flex gap-3"},Qe=["id","onChange","onUpdate:modelValue"],We={class:"flex flex-col grow"},Xe=e("label",{for:"name"},[e("strong",null,"Game"),i(" Description:")],-1),Ye={class:"flex max-h-60 max-w-60"},Ze=e("label",{for:"image"},[e("strong",null,"Game"),i(" Image:")],-1),el=["src"],ll={class:"flex gap-3"},tl={class:"flex flex-col grow"},ol=e("label",{for:"id"},[e("strong",null,"Item"),i(" ID:")],-1),sl={class:"flex flex-col grow"},al=e("label",{for:"name"},[e("strong",null,"Item"),i(" Name:")],-1),nl={class:"flex flex-col grow"},dl=e("label",{for:"price"},[e("strong",null,"Item"),i(" Price:")],-1),cl={__name:"AddProdView",setup(il){const q=H(),s=p({id:"",name:"",image:"",uploader:q.user.email,method:[{name:"",type:""}]}),x=p({message:"",type:""}),_=p({message:"",type:""}),u=p({id:"",name:"",image:"",uploader:q.user.email}),a=p({id:"",name:"",price:0,game:"",currency:"",uploader:q.user.email}),N=p([]),R=p([]),B=async()=>{const t=P(y(b,"game")),o=await M(t);N.value=o.docs.map(l=>l.data())},O=async()=>{const t=P(y(b,"game",a.value.game,"products")),o=await M(t);R.value=o.docs.map(l=>l.data())},E=async(t,o)=>{const r=t.target.files;if(r.length>0){const w=r[0],I=Q(W,`images/${w.name}`);try{await X(I,w);const k=await Y(I);o==="game"?s.value.image=k:u.value.image=k}catch(k){console.error("Error uploading file: ",k)}}},$=async()=>{try{if(!s.value.id||!s.value.name||!s.value.desc||!s.value.image){console.error("Please fill in all required fields."),_.value={message:"Please fill in all required fields.",type:"error"};return}const t=s.value.id,o=h(y(b,"game"),t);await G(o,s.value),a.game=t,_.value={message:"Document with custom ID added: "+t,type:"success"},console.log("Document with custom ID added: ",t)}catch(t){console.error("Error adding document: ",t)}},v=p({message:"",type:""}),j=async()=>{if(!u.value.id||!u.value.name||!u.value.image){console.error("Please fill in all required fields."),v.value={message:"Please fill in all required fields.",type:"error"};return}try{const t=u.value.id,o=h(b,"game",a.value.game),l=y(o,"products"),r=h(l,t);await G(r,u.value),a.value.currency=t,console.log("Document with custom ID added: ",t),v.value={message:"Document with custom ID added: "+t,type:"success"}}catch(t){console.error("Error adding document: ",t),v.value={message:`Error adding document: ${t.message}`,type:"error"}}},T=async()=>{try{if(!a.value.id||!a.value.name||!a.value.price||!a.value.game||!a.value.currency){console.error("Please fill in all required fields."),x.value={message:"Please fill in all required fields.",type:"error"};return}try{const t=h(b,"game",a.value.game),o=y(t,"products"),l=h(o,a.value.currency),r=y(l,"items"),w=h(r,a.value.id);await G(w,a.value),x.value={message:"Item added to 'products' sub-collection in the selected game document.",type:"success"}}catch(t){console.error("Error adding item: ",t)}}catch(t){console.error("Error adding item: ",t)}},F=t=>{const l=s.value.method[t].optionString.split(",");s.value.method[t].options=l,console.log(s.value.method[t].options)},K=()=>{s.value.method.push({name:"",type:""})},L=t=>{const o={name:s.value.method[t].name,type:s.value.method[t].type,optionString:"",options:[]};s.value.method[t]=o,console.log(s.value.method[t])},z=t=>{const o={name:s.value.method[t].name,type:s.value.method[t].type};s.value.method[t]=o,console.log(s.value.method[t])};return J(()=>{B()}),(t,o)=>(n(),d("div",null,[ee,e("form",le,[te,c(e("select",{onChange:O,required:"",class:"bg-slate-700 p-3 rounded-lg text-lg max-w-md",name:"Games",id:"Games","onUpdate:modelValue":o[0]||(o[0]=l=>a.value.game=l)},[oe,(n(!0),d(U,null,V(N.value,l=>(n(),d("option",{key:l.id,value:l.id},[e("img",{src:l.image,alt:""},null,8,ae),i(" "+f(l.name),1)],8,se))),128)),_.value.type=="success"?(n(),d("option",{key:0,selected:"",value:s.value.id},f(s.value.name),9,ne)):g("",!0),e("option",de,[e("span",ie,[D(A),i("Add new game")])])],544),[[C,a.value.game]]),a.value.game&&a.value.game!="add"?(n(),d("div",ue,[re,c(e("select",{required:"",class:"bg-slate-700 p-3 rounded-lg text-lg max-w-md",name:"Games",id:"Games","onUpdate:modelValue":o[1]||(o[1]=l=>a.value.currency=l)},[ce,(n(!0),d(U,null,V(R.value,l=>(n(),d("option",{key:l.id,value:l.id},[e("img",{src:l.image,alt:""},null,8,me),i(" "+f(l.name),1)],8,ge))),128)),v.value.type=="success"?(n(),d("option",{key:0,selected:"",value:u.value.id},f(u.value.name),9,pe)):g("",!0),e("option",ve,[e("span",fe,[D(A),i("Add new currency")])])],512),[[C,a.value.currency]]),a.value.currency=="add"?(n(),d("div",_e,[e("div",ye,[e("div",he,[xe,c(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id","onUpdate:modelValue":o[2]||(o[2]=l=>u.value.id=l)},null,512),[[m,u.value.id]])]),e("div",be,[we,c(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":o[3]||(o[3]=l=>u.value.name=l)},null,512),[[m,u.value.name]])])]),e("div",ke,[e("div",null,[qe,e("input",{required:"",type:"file",class:"p-3 file:p-2 file:bg-slate-700 file:rounded-full file:border-0 file:hover:bg-slate-600 file:me-3 file:px-4 file:text-white",id:"image",onChange:o[4]||(o[4]=l=>E(l,"currency"))},null,32)]),Ce,u.value.image?(n(),d("img",{key:0,src:u.value.image,class:"",alt:"Uploaded Image",style:{"max-width":"100%","margin-top":"10px"}},null,8,Ue)):g("",!0)]),e("button",{type:"button",class:"bg-blue-700 p-3 rounded-lg text-lg",onClick:j},"Add Currency"),v.value.message?(n(),d("div",{key:0,class:S([v.value.type=="success"?"bg-green-500":"bg-red-500","rounded-lg text-black p-5"])},[e("span",null,f(v.value.message),1)],2)):g("",!0)])):g("",!0)])):g("",!0),a.value.game=="add"?(n(),d("div",Ve,[e("div",De,[e("div",Se,[Ge,c(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id","onUpdate:modelValue":o[5]||(o[5]=l=>s.value.id=l)},null,512),[[m,s.value.id]])]),e("div",Ae,[Ne,c(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":o[6]||(o[6]=l=>s.value.name=l)},null,512),[[m,s.value.name]])])]),e("div",Re,[e("button",{type:"button",onClick:K,class:"group text-lg font-semibold flex gap-2 justify-center"},[D(A,{class:"w-7 duration-150 group-hover:scale-105"}),i(" Add method ")])]),(n(!0),d(U,null,V(s.value.method.length,l=>(n(),d("div",{key:l,class:"flex flex-col gap-3"},[e("div",Ee,[e("div",Ie,[Pe,c(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id_"+l,"onUpdate:modelValue":r=>s.value.method[l-1].name=r},null,8,Me),[[m,s.value.method[l-1].name]])]),e("div",Be,[Oe,c(e("select",{onChange:r=>s.value.method[l-1].type==="select"?L(l-1):z(l-1),class:"bg-slate-700 capitalize p-4 rounded-lg text-lg",id:"type_"+l,"onUpdate:modelValue":r=>s.value.method[l-1].type=r},Te,40,$e),[[C,s.value.method[l-1].type]])])]),e("div",Fe,[s.value.method[l-1].type==="select"?(n(),d("div",Ke,He)):g("",!0),s.value.method[l-1].type==="select"?(n(),d("div",Je,[c(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg grow",id:"option_"+t.index,onChange:r=>F(l-1),"onUpdate:modelValue":r=>s.value.method[l-1].optionString=r},null,40,Qe),[[m,s.value.method[l-1].optionString]])])):g("",!0)])]))),128)),e("div",We,[Xe,c(e("textarea",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":o[7]||(o[7]=l=>s.value.desc=l)},null,512),[[m,s.value.desc]])]),e("div",Ye,[e("div",null,[Ze,e("input",{required:"",type:"file",class:"p-3 file:p-2 file:bg-slate-700 file:rounded-full file:border-0 file:hover:bg-slate-600 file:me-3 file:px-4 file:text-white",id:"image",onChange:o[8]||(o[8]=l=>E(l,"game"))},null,32)]),s.value.image?(n(),d("img",{key:0,src:s.value.image,class:"",alt:"Uploaded Image",style:{"max-width":"100%","margin-top":"10px"}},null,8,el)):g("",!0)]),e("button",{type:"button",class:"bg-blue-700 p-3 rounded-lg text-lg",onClick:$},"Add Game"),_.value.message?(n(),d("div",{key:0,class:S([_.value.type==="success"?"bg-green-500":"bg-red-500","rounded-lg text-black p-5"])},[e("span",null,f(_.value.message),1)],2)):g("",!0)])):g("",!0),e("div",ll,[e("div",tl,[ol,c(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"id","onUpdate:modelValue":o[9]||(o[9]=l=>a.value.id=l)},null,512),[[m,a.value.id]])]),e("div",sl,[al,c(e("input",{required:"",type:"text",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"name","onUpdate:modelValue":o[10]||(o[10]=l=>a.value.name=l)},null,512),[[m,a.value.name]])])]),e("div",nl,[dl,c(e("input",{required:"",type:"number",class:"bg-slate-700 p-3 rounded-lg text-lg",id:"price","onUpdate:modelValue":o[11]||(o[11]=l=>a.value.price=l)},null,512),[[m,a.value.price]])]),e("button",{type:"button",class:"bg-blue-700 p-3 rounded-lg text-lg",onClick:T},"Add Items"),x.value.message?(n(),d("div",{key:2,class:S([x.value.type==="success"?"bg-green-300":"bg-red-300","rounded-lg text-black p-5"])},[e("span",null,f(x.value.message)+" in ",1)],2)):g("",!0)])]))}};export{cl as default};
